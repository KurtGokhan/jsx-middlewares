"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[673],{764:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>b,contentTitle:()=>x,default:()=>y,frontMatter:()=>f,metadata:()=>w,toc:()=>j});var t=r(5893),s=r(1151),o=r(7294),i=r(1007);const d=(0,r(9752).P)(),{jsx:c,jsxDEV:a,jsxs:l}=d,m=new Map;function u(e){let{children:n}=e;const r=(0,o.useRef)(0);return l("p",{children:[c("span",{children:n}),l("span",{children:["\xa0Render count: ",++r.current]})]})}function p(){const[e,n]=(0,o.useState)(0);return(0,o.useEffect)((()=>{const e=setInterval((()=>{n((e=>e+1))}),1e3);return()=>{clearInterval(e)}}),[]),l("div",{children:[l("p",{children:["Timer: ",e]}),c(u,{children:"This is not memoed."}),c(u,{$memo:!0,children:"This is memoed."})]})}function h(){return c(i.Z,{children:c(p,{})})}d.addMiddlewares((function(e,n,r,t){let{$memo:s,...i}=r;if(s&&"function"==typeof n){let r=m.get(n);return r||(r=(0,o.memo)(n),m.set(n,r)),e(r,i,t)}return e(n,i,t)}));const f={sidebar_position:5},x="Memo Directive",w={id:"examples/memo",title:"Memo Directive",description:"This directive memoizes a component with React.memo to avoid unnecessary rerenders.",source:"@site/docs/examples/memo.mdx",sourceDirName:"examples",slug:"/examples/memo",permalink:"/jsx-middlewares/examples/memo",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Ripple",permalink:"/jsx-middlewares/examples/ripple"},next:{title:"Active Wheel Event Handler Directive",permalink:"/jsx-middlewares/examples/on-wheel-active"}},b={},j=[{value:"Usage",id:"usage",level:2},{value:"Typescript types",id:"typescript-types",level:2}];function v(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"memo-directive",children:"Memo Directive"}),"\n",(0,t.jsxs)(n.p,{children:["This directive memoizes a component with ",(0,t.jsx)(n.code,{children:"React.memo"})," to avoid unnecessary rerenders."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:"const memoMap = new Map();\n\nfunction memoMiddleware(next, type, { $memo, ...props }, key) {\n  if ($memo && typeof type === 'function') {\n    let memoed = memoMap.get(type);\n    if (!memoed) {\n      memoed = React.memo(type);\n      memoMap.set(type, memoed);\n    }\n\n    return next(memoed, props, key);\n  }\n\n  return next(type, props, key);\n}\n\naddMiddlewares(memoMiddleware);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:"function App() {\n  // ...\n  return (\n    <div>\n      <Memoed>This is not memoed.</Memoed>\n      <Memoed $memo>This is memoed.</Memoed>\n    </div>\n  );\n}\n"})}),"\n",(0,t.jsx)(h,{}),"\n",(0,t.jsx)(n.h2,{id:"typescript-types",children:"Typescript types"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"declare module 'react' {\n  interface Attributes {\n    $memo?: boolean;\n  }\n}\n"})})]})}function y(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(v,{...e})}):v(e)}},1007:(e,n,r)=>{r.d(n,{Z:()=>i});var t=r(512);r(7294);const s={browserWindow:"browserWindow_my1Q",browserWindowHeader:"browserWindowHeader_jXSR",row:"row_KZDM",buttons:"buttons_uHc7",right:"right_oyze",browserWindowAddressBar:"browserWindowAddressBar_Pd8y",dot:"dot_giz1",browserWindowMenuIcon:"browserWindowMenuIcon_Vhuh",bar:"bar_rrRL",browserWindowBody:"browserWindowBody_Idgs"};var o=r(5893);function i(e){let{children:n,minHeight:r,url:i="http://localhost:3000",style:d,bodyStyle:c}=e;return(0,o.jsxs)("div",{className:s.browserWindow,style:{...d,minHeight:r},children:[(0,o.jsxs)("div",{className:s.browserWindowHeader,children:[(0,o.jsxs)("div",{className:s.buttons,children:[(0,o.jsx)("span",{className:s.dot,style:{background:"#f25f58"}}),(0,o.jsx)("span",{className:s.dot,style:{background:"#fbbe3c"}}),(0,o.jsx)("span",{className:s.dot,style:{background:"#58cb42"}})]}),(0,o.jsx)("div",{className:(0,t.Z)(s.browserWindowAddressBar,"text--truncate"),children:i}),(0,o.jsx)("div",{className:s.browserWindowMenuIcon,children:(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:s.bar}),(0,o.jsx)("span",{className:s.bar}),(0,o.jsx)("span",{className:s.bar})]})})]}),(0,o.jsx)("div",{className:s.browserWindowBody,style:c,children:n})]})}},9752:(e,n,r)=>{function t(e,n,r){return s([],void 0,e,n,r)}function s(e,n,r,t,o){let i,d,c,a;void 0===e&&(e=[]),t??=r,o??=r;const l=[],m=e=>l.push(e);function u(){d=p(r?.bind(null)),c=p(t?.bind(null)),a=function(e,n,r,t,s,i){return p((function(e,n,r){return o(e,n,r,t,s,i)}))(e,n,r)};for(const e of l)e()}function p(n){let r=n;r&&(r.context=i,r.original=n);for(let t=0;t<e.length;t++){const s=e[t];s&&(r=s.bind(null,r),r.context=i,r.original=n)}return r}return n?.(u),i={addMiddlewares:function(){return e.push(...arguments),u(),i},removeMiddlewares:function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];for(const s of r){const n=e.indexOf(s);n>-1&&e.splice(n,1)}return u(),i},clearMiddlewares:function(){return e.length=0,u(),i},jsxClassic:function(e,n){let r;({key:r,...n}=n||{});for(var t=arguments.length,s=new Array(t>2?t-2:0),o=2;o<t;o++)s[o-2]=arguments[o];if(null!=s&&s.length>0){if(1===s.length)return n.children=s[0],d(e,n,r);n.children=s}return c(e,n,r)},jsx:function(e,n,r){return d(e,n,r)},jsxs:function(e,n,r){return c(e,n,r)},jsxDEV:function(e,n,r,t,s,o){return a(e,n,r,t,s,o)},clone:function(n,i,d){return s(e,m,n||r,i||t,d||o)}},u(),i}r.d(n,{P:()=>i});var o=r(5893);function i(){return t(o.jsx,o.jsxs)}},1151:(e,n,r)=>{r.d(n,{Z:()=>d,a:()=>i});var t=r(7294);const s={},o=t.createContext(s);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);